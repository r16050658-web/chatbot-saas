{% extends 'base.html' %}{% block title %}Chat - {{ bot.name }}{% endblock %}
{% block content %}
<div class="max-w-3xl mx-auto py-6">
  <div class="rounded-2xl border bg-white">
    <div class="p-4 border-b">
      <div class="font-semibold">Chat with {{ bot.name }}</div>
      <div class="text-sm text-slate-500">Tokens left: {{ request.user.tokens_remaining }}</div>
    </div>
    <div class="p-4 space-y-3 max-h-[50vh] overflow-y-auto">
      {% for m in history %}
        <div>
          <div class="text-slate-500 text-xs">You</div>
          <div class="rounded-xl bg-slate-100 p-3">{{ m.user_input }}</div>
        </div>
        <div class="ml-6">
          <div class="text-sky-600 text-xs">Bot</div>
          <div class="rounded-xl bg-sky-50 p-3">{{ m.bot_response }}</div>
        </div>
      {% empty %}
        <p class="text-slate-500">Start the conversation…</p>
      {% endfor %}
    </div>
    <form method="post" class="p-4 border-t flex gap-2">
      {% csrf_token %}
      <input name="message" placeholder="Type your message…" class="flex-1 border rounded-xl px-3 py-2" />
      <button class="px-4 rounded-xl bg-sky-600 text-white">Send</button>
    </form>
  </div>
</div>
{% endblock %}
